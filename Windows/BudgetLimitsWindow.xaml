<Window x:Class="BudgetApp.Windows.BudgetLimitsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Ð›Ð¸Ð¼Ð¸Ñ‚Ñ‹ Ð±ÑŽÐ´Ð¶ÐµÑ‚Ð°" Height="600" Width="900"
        WindowStartupLocation="CenterOwner">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,15">
            <TextBlock Text="Ð›Ð¸Ð¼Ð¸Ñ‚Ñ‹ Ð±ÑŽÐ´Ð¶ÐµÑ‚Ð°" FontSize="24" FontWeight="Bold" VerticalAlignment="Center" Margin="0,0,20,0"/>
            <Button Content="+ Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð»Ð¸Ð¼Ð¸Ñ‚" Click="AddLimit_Click" 
                    Background="#4ECDC4" Foreground="White" FontWeight="Bold"/>
        </StackPanel>

        <DataGrid x:Name="LimitsGrid" Grid.Row="1" 
                  AutoGenerateColumns="False" 
                  CanUserAddRows="False"
                  SelectionMode="Single"
                  GridLinesVisibility="Horizontal"
                  HeadersVisibility="Column"
                  Margin="0,0,0,10">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ" Binding="{Binding CategoryName}" Width="*"/>
                <DataGridTextColumn Header="Ð¢Ð¸Ð¿" Binding="{Binding Type}" Width="120">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Type}" Value="Income">
                                    <Setter Property="Foreground" Value="#4ECDC4"/>
                                    <Setter Property="Text" Value="Ð”Ð¾Ñ…Ð¾Ð´"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Type}" Value="Expense">
                                    <Setter Property="Foreground" Value="#FF6B6B"/>
                                    <Setter Property="Text" Value="Ð Ð°ÑÑ…Ð¾Ð´"/>
                                </DataTrigger>
                            </Style.Triggers>
                            <Setter Property="FontWeight" Value="Bold"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="Ð›Ð¸Ð¼Ð¸Ñ‚" Binding="{Binding Limit, StringFormat='{}{0:N2} â‚½'}" Width="150"/>
                <DataGridTextColumn Header="ÐŸÐµÑ€Ð¸Ð¾Ð´" Binding="{Binding Period}" Width="100">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Period}" Value="Month">
                                    <Setter Property="Text" Value="ÐœÐµÑÑÑ†"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Period}" Value="Week">
                                    <Setter Property="Text" Value="ÐÐµÐ´ÐµÐ»Ñ"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Period}" Value="Year">
                                    <Setter Property="Text" Value="Ð“Ð¾Ð´"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTemplateColumn Header="Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¾" Width="150">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Used, StringFormat='{}{0:N2} â‚½'}" 
                                       FontWeight="Bold">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding IsOverLimit}" Value="True">
                                                <Setter Property="Foreground" Value="#FF6B6B"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding IsOverLimit}" Value="False">
                                                <Setter Property="Foreground" Value="#4ECDC4"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="ÐžÑÑ‚Ð°Ñ‚Ð¾Ðº" Width="150">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Remaining, StringFormat='{}{0:N2} â‚½'}" 
                                       FontWeight="Bold">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding IsOverLimit}" Value="True">
                                                <Setter Property="Foreground" Value="#FF6B6B"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding IsOverLimit}" Value="False">
                                                <Setter Property="Foreground" Value="#4ECDC4"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ" Width="100">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <Button Content="âœï¸" Click="EditLimit_Click" 
                                        Tag="{Binding}" Background="Transparent" BorderThickness="0" Padding="5"/>
                                <Button Content="ðŸ—‘ï¸" Click="DeleteLimit_Click" 
                                        Tag="{Binding}" Background="Transparent" BorderThickness="0" Padding="5"/>
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

        <Button Grid.Row="2" Content="Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ" Click="Close_Click" 
                HorizontalAlignment="Right" Width="100" Background="#95A5A6" Foreground="White"/>
    </Grid>
</Window>

